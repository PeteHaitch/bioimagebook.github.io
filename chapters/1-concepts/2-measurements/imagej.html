
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ImageJ: Measurements &amp; histograms &#8212; Introduction to Bioimage Analysis</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mycss.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Python: Measurements &amp; histograms" href="python.html" />
    <link rel="prev" title="Measurements &amp; histograms" href="measurements.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/book-logo-smaller.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Bioimage Analysis</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../README.html">
   Introduction to Bioimage Analysis
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Front matter
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../0-preamble/acknowledgements/acknowledgements.html">
   Acknowledgements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../0-preamble/license.html">
   License
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../0-preamble/disclaimer.html">
   Disclaimer
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Before we begin
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../0-preamble/preface/preface.html">
   Preface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../0-preamble/reading/reading.html">
   How to read this book
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introducing images
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../1-images_and_pixels/images_and_pixels.html">
   Images &amp; pixels
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../1-images_and_pixels/imagej.html">
     ImageJ: Images &amp; pixels
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../1-images_and_pixels/python.html">
     Python: Images &amp; pixels
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="measurements.html">
   Measurements &amp; histograms
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     ImageJ: Measurements &amp; histograms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python.html">
     Python: Measurements &amp; histograms
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../3-bit_depths/bit_depths.html">
   Types &amp; bit-depths
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../3-bit_depths/imagej.html">
     ImageJ: Types &amp; bit-depths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3-bit_depths/python.html">
     Python: Types &amp; bit-depths
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../4-colors/colors.html">
   Channels &amp; colors
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../4-colors/imagej.html">
     ImageJ: Channels &amp; colors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4-colors/python.html">
     Python: Channels &amp; colors
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../5-pixel_size/pixel_size.html">
   Pixel size &amp; dimensions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../5-pixel_size/imagej.html">
     ImageJ:  Pixel size &amp; dimensions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5-pixel_size/python.html">
     Python:  Pixel size &amp; dimensions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../6-files/files.html">
   Files &amp; file formats
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../6-files/imagej.html">
     ImageJ: Files &amp; file formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6-files/python.html">
     Python: Files &amp; file formats
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Processing &amp; analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../2-processing/1-processing_and_analysis/processing_and_analysis.html">
   Image processing &amp; analysis
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/2-point_operations/point_operations.html">
   Point operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/2-point_operations/imagej.html">
     ImageJ: Point operations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/3-thresholding/thresholding.html">
   Thresholding
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/3-thresholding/imagej.html">
     ImageJ: Thresholding
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/4-filters/filters.html">
   Filters
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/4-filters/imagej.html">
     ImageJ: Filters
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/5-morph/morph.html">
   Morphological operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/5-morph/imagej.html">
     ImageJ: Morphological operations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/6-transforms/transforms.html">
   Image transforms
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/6-transforms/imagej.html">
     ImageJ: Image transforms
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../2-processing/7-multidimensional_processing/multidimensional_processing.html">
   Multidimensional processing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../2-processing/7-multidimensional_processing/imagej.html">
     ImageJ: Multidimensional processing
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fluorescence microscopy
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../3-fluorescence/1-formation_overview/formation_overview.html">
   From photons to pixels
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../3-fluorescence/2-formation_spatial/formation_spatial.html">
   Blur &amp; the PSF
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../3-fluorescence/3-formation_noise/formation_noise.html">
   Noise
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../3-fluorescence/4-microscope_types/microscope_types.html">
   Microscopes &amp; detectors
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendices/next_steps/next_steps.html">
   Beyond this book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendices/python/python.html">
   Python Primer
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../appendices/macros/macro_intro.html">
   ImageJ: Writing macros
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendices/macros/macro_dog.html">
     Difference of Gaussians
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendices/macros/macro_simulating.html">
     Simulating image formation
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../../_sources/chapters/1-concepts/2-measurements/imagej.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/chapters/1-concepts/2-measurements/imagej.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/petebankhead/jupyter-book/main?urlpath=tree/chapters/1-concepts/2-measurements/imagej.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measuring-images">
   Measuring images
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#choosing-which-measurements-to-select">
     Choosing which measurements to select
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#regions-of-interest">
   Regions Of Interest
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-multiple-rois">
   Working with multiple ROIs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-roi-manager">
     The ROI Manager
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overlays">
     Overlays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-rois">
     Saving ROIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generating-histograms">
   Generating histograms
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ImageJ: Measurements & histograms</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measuring-images">
   Measuring images
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#choosing-which-measurements-to-select">
     Choosing which measurements to select
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#regions-of-interest">
   Regions Of Interest
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-multiple-rois">
   Working with multiple ROIs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-roi-manager">
     The ROI Manager
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#overlays">
     Overlays
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#saving-rois">
     Saving ROIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generating-histograms">
   Generating histograms
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="imagej-measurements-histograms">
<span id="chap-rois"></span><h1>ImageJ: Measurements &amp; histograms<a class="headerlink" href="#imagej-measurements-histograms" title="Permalink to this headline">¶</a></h1>
<div class="cell tag_hide-cell tag_thebe-init docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2

<span class="c1"># Default imports</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../../../&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">helpers</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">myst_nb</span> <span class="kn">import</span> <span class="n">glue</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">ndimage</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>ImageJ makes generating basic measurements and histograms <em>extremely</em> easy:</p>
<ul class="simple">
<li><p>Press <kbd class="kbd docutils literal notranslate">M</kbd> to make <strong>M</strong>easurements</p>
<ul>
<li><p>This is the shortcut to run <span class="menuselection">Analyze ‣ Measure</span>.</p></li>
</ul>
</li>
<li><p>Press <kbd class="kbd docutils literal notranslate">H</kbd> to create a <strong>H</strong>istogram</p>
<ul>
<li><p>This is the shortcut to run <span class="menuselection">Analyze ‣ Histogram</span>.</p></li>
</ul>
</li>
</ul>
<p>Assuming your image is 2D and there is no ROI active (we will explore <a class="reference internal" href="../5-pixel_size/pixel_size.html#chap-dimensions"><span class="std std-ref">dimensions</span></a> and <a class="reference internal" href="#sec-imagej-rois"><span class="std std-ref">ROIs</span></a> later), both of these commands will use all the pixels in the image.</p>
<p>We’ll explore how to customize the regions being measured and exactly what measurements are made later in this section, but already it should be possible to answer the following questions.</p>
<div class="tabbed-set docutils">
<input checked="checked" id="f06fad46-2661-4a10-98f2-03ae598cbd5a" name="acee5658-2365-47f9-9e2a-8c433822c66e" type="radio">
</input><label class="tabbed-label" for="f06fad46-2661-4a10-98f2-03ae598cbd5a">
Practical</label><div class="tabbed-content docutils">
<p><em>similar_1.tif</em>, <em>similar_2.tif</em>, <em>similar_3.tif</em> and <em>similar_4.tif</em> are all, well, similar.
However only two contain <em>identical</em> pixel values.</p>
<p>Which two images contain the same values?</p>
</div>
<input id="4d2e5677-7634-41fa-9358-23c45706feab" name="acee5658-2365-47f9-9e2a-8c433822c66e" type="radio">
</input><label class="tabbed-label" for="4d2e5677-7634-41fa-9358-23c45706feab">
Solution</label><div class="tabbed-content docutils">
<p>Only <em>similar_1.tif</em> and <em>similar_3.tif</em> can contain the same values.
An easy way to determine this is to compute the mean (average) of all pixels in each of the images.
Only those two images share the same mean value.</p>
</div>
</div>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<a class="reference internal image-reference" href="../../../_images/disguised.png"><img alt="../../../_images/disguised.png" src="../../../_images/disguised.png" style="width: 50%;" /></a>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="93fec775-0c45-4b55-927d-d92ed9bef9ff" name="126a403d-fc36-4984-a0f0-cb10ee6dcee1" type="radio">
</input><label class="tabbed-label" for="93fec775-0c45-4b55-927d-d92ed9bef9ff">
Practical</label><div class="tabbed-content docutils">
<p><em>disguise_matching.tif</em> has lost its match.</p>
<p>Which of the following three images have the same pixel values as <em>disguise_matching.tif</em>?</p>
<ul class="simple">
<li><p><em>disguised_1.tif</em></p></li>
<li><p><em>disguised_2.tif</em></p></li>
<li><p><em>disguised_3.tif</em></p></li>
</ul>
</div>
<input id="89f3bd00-9ef1-4211-a512-27dabc63db5e" name="126a403d-fc36-4984-a0f0-cb10ee6dcee1" type="radio">
</input><label class="tabbed-label" for="89f3bd00-9ef1-4211-a512-27dabc63db5e">
Solution</label><div class="tabbed-content docutils">
<p><em>disguised_3.tif</em> is the matching image.</p>
</div>
</div>
</div>
<div class="section" id="measuring-images">
<h2>Measuring images<a class="headerlink" href="#measuring-images" title="Permalink to this headline">¶</a></h2>
<p>When using <span class="menuselection">Analyze ‣ Measure</span>, the measurements are added to a <em>Results table</em>.</p>
<p>By default, the mean, minimum and maximum pixel values are provided, along with the area of the image… and that’s all.
It’s not a lot.</p>
<p>Furthermore, if you make multiple measurements then they are added to the <em>same</em> results table, without any identifiers.
This is especially confusing if you have several images open at the same time, and have no clue which row of the results table corresponds to measurements from which image.</p>
<p><span class="menuselection">Analyze ‣ Set Measurements…</span> makes it possible to address both of these limitations.
It not only provides many more measurements that can be selected, it includes a crucial <span class="guilabel">Display label</span> option that will cause the title of the image to be included in the results table (<a class="reference internal" href="#fig-measure"><span class="std std-numref">Fig. 12</span></a>).</p>
<div class="caution admonition" id="sec-imagej-measure-calibration">
<p class="admonition-title">Measurement units matter – but aren’t displayed!</p>
<p>The results table does not include units for measurements, even though these are essential.
Seeing an area of 10 <em>might</em> mean 10 pixels<sup>2</sup>, or 10 µm<sup>2</sup>… or something else entirely.</p>
<p>See <a class="reference internal" href="../5-pixel_size/pixel_size.html#chap-pixel-size"><span class="std std-ref">Pixel size &amp; dimensions</span></a> for more information about why that matters for any measurements of size (area, length etc.), and how to check the units.</p>
</div>
<div class="cell tag_hide-cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">create_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/measure-image.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Image&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/measure-set.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Set Measurements dialog&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/measure-results.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Results table&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">glue_fig</span><span class="p">(</span><span class="s1">&#39;fig_measure_results&#39;</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-center" id="fig-measure" style="width: 100%">
<div class="cell_output docutils container">
<img alt="../../../_images/imagej_5_0.png" src="../../../_images/imagej_5_0.png" />
</div>
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">Measurements made on an image are added to a results table. The choice of measurements to make can be changed using the <span class="menuselection">Analyze ‣ Set Measurements…</span> command.</span><a class="headerlink" href="#fig-measure" title="Permalink to this image">¶</a></p>
</div>
<div class="cell tag_hide-cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">create_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/measure-results.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&#39;Official&#39; results table&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">121</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/measure-unofficial.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&#39;Unofficial&#39; results table&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">122</span><span class="p">)</span>
<span class="n">glue_fig</span><span class="p">(</span><span class="s1">&#39;fig_measure_tables&#39;</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-the-one-true-results-table-its-imposters admonition">
<p class="admonition-title">The ‘One True Results Table’ &amp; its imposters</p>
<p>A small idiosyncrasy to be aware of is that, as far as ImageJ is concerned, there is only ever one ‘official’ results table – the one with the title <span class="guilabel">Results</span>.</p>
<p>Different, similar-looking tables can be created by different commands, or by duplicating an existing results table with <span class="menuselection">File ‣ Duplicate…</span>.
Nevertheless, any new measurements you make with the <span class="menuselection">Measure</span> command will <em>only</em> be added to the original, official table.
This also has an extra <span class="guilabel">Results</span> entry in its menu bar that other tables lack.</p>
<div class="figure align-default">
<div class="cell_output docutils container">
<img alt="../../../_images/imagej_7_0.png" src="../../../_images/imagej_7_0.png" />
</div>
</div>
</div>
<div class="section" id="choosing-which-measurements-to-select">
<h3>Choosing which measurements to select<a class="headerlink" href="#choosing-which-measurements-to-select" title="Permalink to this headline">¶</a></h3>
<p>Some options within <span class="menuselection">Analyze ‣ Set Measurements…</span> are so universally useful that they should pretty much always be set.
Conversely, some options are manifestly confusing and dangerous and should be used rarely – or not at all.</p>
<p>Options to <strong>always</strong> select:</p>
<ul class="simple">
<li><p><span class="guilabel">Area</span>, <span class="guilabel">Mean gray value</span>, <span class="guilabel">Standard deviation</span>, <span class="guilabel">Min &amp; max gray value</span> – basic summary values</p></li>
<li><p><span class="guilabel">Display label</span> – includes the image title</p></li>
<li><p><span class="guilabel">Stack Position</span> – includes the 2D plane that has been measured in an image with <a class="reference internal" href="../5-pixel_size/pixel_size.html#chap-dimensions"><span class="std std-ref">more dimensions</span></a>.</p></li>
</ul>
<p>Options to <strong>avoid</strong>:</p>
<ul class="simple">
<li><p><span class="guilabel">Limit to threshold</span> – restricts the region being measured according to any <a class="reference internal" href="../../2-processing/3-thresholding/thresholding.html#chap-thresholding"><span class="std std-ref">threshold</span></a> that has been set; don’t do this routinely, instead convert your threshold to a ROI and use that instead.</p></li>
<li><p><span class="guilabel">Redirect to</span> – measures a different image from the one that’s selected. It sounds weird, but it’s intended for cases where you have two corresponding images; one in which you can identify a region to measure, and one that contains the pixel values you should measure.</p></li>
</ul>
<p>The two options that I think you should avoid can both result in something unexpected being measured if you don’t know (or have forgotten) that either was selected under <span class="menuselection">Analyze ‣ Set Measurements…</span>.</p>
<p>Fortunately, they are not really needed if you master the art of generating, managing and transferring regions of interest between images.</p>
</div>
</div>
<div class="section" id="regions-of-interest">
<span id="sec-imagej-rois"></span><h2>Regions Of Interest<a class="headerlink" href="#regions-of-interest" title="Permalink to this headline">¶</a></h2>
<p><strong>Regions Of Interest (ROIs)</strong> can be used to define specific parts of an image that should be processed independently or measured.
Only pixels within any ROI we draw will be included in the calculations when we run <span class="menuselection">Analyze ‣ Measure</span>.</p>
<div class="cell tag_hide-cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">create_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">))</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/roi-toolbar.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Tool bar&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">211</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/roi-glasses.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&#39;Image + ROI&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">212</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">glue_fig</span><span class="p">(</span><span class="s1">&#39;fig_rois_drawing&#39;</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-center" id="fig-roi-drawing" style="width: 60%">
<div class="cell_output docutils container">
<img alt="../../../_images/imagej_9_0.png" src="../../../_images/imagej_9_0.png" />
</div>
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text">ROI drawing tools are found on the left side of the ImageJ tool bar (A). The ROI in (B) was created by drawing one rectangular and two circular ROIs, holding down the <kbd class="kbd docutils literal notranslate">Shift</kbd> key between each so that the regions were combined.</span><a class="headerlink" href="#fig-roi-drawing" title="Permalink to this image">¶</a></p>
</div>
<p>ROIs of different types (e.g. rectangles, circles, lines, points, polygons, freehand shapes) can be drawn using the commands in the tool bar (<a class="reference internal" href="#fig-roi-drawing"><span class="std std-numref">Fig. 13</span></a>), and are invariably 2D.
Right-clicking the tools often provides access to related tools, while double-clicking may give additional options.
When drawing a ROI, pressing <kbd class="kbd docutils literal notranslate">Shift</kbd> or <kbd class="kbd docutils literal notranslate">Control</kbd> before releasing the mouse button adds the ROI being drawn to any existing ROI already present.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p><strong>ROIs</strong> in ImageJ are sometimes called <strong>selections</strong> – meaning the same thing</p>
</div>
<p>Somewhat confusingly, ROIs are sometimes referred to as <strong>selections</strong> in ImageJ.
This is why some extra commands to create or adjust ROIs appear under the <span class="menuselection">Edit ‣ Selection</span> submenu.</p>
<p>One such command is <span class="menuselection">Edit ‣ Selection ‣ Create Mask</span>.
This creates a new <a class="reference internal" href="../../2-processing/5-morph/morph.html#chap-binary"><span class="std std-ref">binary</span></a> (black and white) image that differentiates between the pixels that are inside and outside the ROI.</p>
<div class="cell tag_hide-cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">create_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/binary-happy-cell.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Image with ROI&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">121</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/binary-happy-mask.png&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Binary mask from ROI&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">122</span><span class="p">)</span>
<span class="c1">#plt.tight_layout()</span>
<span class="n">glue_fig</span><span class="p">(</span><span class="s1">&#39;fig_rois_mask&#39;</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-center" id="fig-rois-mask" style="width: 70%">
<div class="cell_output docutils container">
<img alt="../../../_images/imagej_11_0.png" src="../../../_images/imagej_11_0.png" />
</div>
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">A ROI representing an area is usually depicted using yellow lines drawn on an image, but sometimes it isn’t clear which pixels are inside or outside the ROI. <span class="menuselection">Edit ‣ Selection ‣ Create Mask</span> can help clarify this.</span><a class="headerlink" href="#fig-rois-mask" title="Permalink to this image">¶</a></p>
</div>
<div class="margin figure align-default" id="id2">
<a class="reference internal image-reference" href="../../../_images/binary-options.png"><img alt="../../../_images/binary-options.png" src="../../../_images/binary-options.png" style="width: 196.7px; height: 168.7px;" /></a>
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text"><span class="menuselection">Process ‣ Binary ‣ Options…</span></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="danger admonition">
<p class="admonition-title">Interpreting ‘Create Mask’</p>
<p>Unfortunately, when using <span class="menuselection">Edit ‣ Selection ‣ Create Mask</span> it is not <em>entirely certain</em> whether black means ‘inside’ or ‘outside’.
This depends upon whether <span class="guilabel">Black background</span> is selected within <span class="menuselection">Process ‣ Binary ‣ Options…</span>.</p>
<p>This doesn’t usually matter in practice, because it tends to be clear from the context; ROIs usually cover a small region of the image, so the background color is the one seen in the majority of pixels.</p>
<p>An exception to this is if <span class="menuselection">Edit ‣ Selection ‣ Make Inverse</span> has been used to flip a ROI to represent all the background pixels of the original, with the foreground removed.</p>
</div>
<div class="caution admonition">
<p class="admonition-title">Don’t overestimate the accuracy of measurements</p>
<p>Although ImageJ can measure very exactly whatever regions it is told to measure <em>within an image</em>, keep in mind that in light microscopy images any size measurements will not exactly correspond to sizes of structures <em>in real life</em>.
This is especially true at very small scales (hundreds of nanometers or smaller), for resolution-related reasons that will be described in <a class="reference internal" href="../../3-fluorescence/2-formation_spatial/formation_spatial.html#chap-formation-spatial"><span class="std std-ref">Blur &amp; the PSF</span></a>.</p>
</div>
</div>
<div class="section" id="working-with-multiple-rois">
<h2>Working with multiple ROIs<a class="headerlink" href="#working-with-multiple-rois" title="Permalink to this headline">¶</a></h2>
<p>Normally, only a single ROI can be ‘active’ in ImageJ (i.e. affecting measurements) at any one time.
If you need control over multiple ROIs, there are two places in which you can store them.
These differ according to purpose:</p>
<ol class="simple">
<li><p><strong>The ROI Manager:</strong> for most ROIs that you want to be able to edit and use for measurements</p></li>
<li><p><strong>The image overlay:</strong> for ROIs that you only want to display</p></li>
</ol>
<div class="section" id="the-roi-manager">
<h3>The ROI Manager<a class="headerlink" href="#the-roi-manager" title="Permalink to this headline">¶</a></h3>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p><kbd class="kbd docutils literal notranslate">T</kbd> for <em><strong>T</strong>roy manager</em>: shortcut to add ROI to the ROI Manager</p>
</div>
<p>ImageJ’s <em>ROI Manager</em> provides a convenient way to store multiple ROIs in a list, allowing you to easily access, edit and measure them.</p>
<p>The slow way to open the ROI Manager is to choose <span class="menuselection">Analyze ‣ Tools ‣ ROI Manager…</span>.
The fast way is just to draw a ROI and press <kbd class="kbd docutils literal notranslate">T</kbd>.</p>
<p>The additional <span class="guilabel">Measure</span> command within the manager is then like applying <span class="menuselection">Analyze ‣ Measure</span> to each ROI in turn.
If you happen to want to show all the ROIs simultaneously, you can select the <span class="guilabel">Show All</span> option <a class="footnote-reference brackets" href="#fn-1" id="id1">1</a>.</p>
<p>Because ROIs in the ROI Manager are represented independently of the image on which they were defined, you can create a ROI on one image, add it to the ROI manager, select a different image and then click on the ROI in the ROI Manager to place it on the second image.
This provides one way to transfer a ROI from one image to another.</p>
<p>Measurements made from the ROI Manager always use the most recently-selected image, so be careful if you have several images open at the same time.
This is another reason why choosing <span class="guilabel">Display label</span> under <span class="menuselection">Analyze ‣ Set Measurements…</span> is so important.</p>
<div class="tip admonition">
<p class="admonition-title">Transferring individual ROIs</p>
<p>A faster way to transfer a single ROI between images without using the ROI Manager is to click on the second image and press <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Shift</kbd> <kbd class="kbd docutils literal notranslate"></kbd>+<kbd class="kbd docutils literal notranslate"></kbd> <kbd class="kbd docutils literal notranslate">E</kbd></kbd> (the shortcut for <span class="menuselection">Edit ‣ Selection ‣ Restore Selection</span>)</p>
</div>
<div class="tip admonition">
<p class="admonition-title">Expert ROI manipulation with the ROI Manager</p>
<p>Using the ROI Manager, you can craft your ROIs into more complex shapes: adding or removing other ROIs.</p>
<p>To do this, first add the main ROIs you want to work with to the manager. Then select them, and choose from among the options:</p>
<ul class="simple">
<li><p><span class="guilabel">AND</span> – create a ROI containing only the regions where the selected ROIs overlap</p></li>
<li><p><span class="guilabel">OR</span> – create a single ROI composed by combining all the selected ROIs</p></li>
<li><p><span class="guilabel">XOR</span> – create a single ROI containing all the selected ROIs, <em>except</em> the places where they overlap (‘eXclusive OR’)</p></li>
</ul>
</div>
<div class="margin figure align-default" id="id3">
<a class="reference internal image-reference" href="../../../_images/binary-happy-roi-manager.png"><img alt="../../../_images/binary-happy-roi-manager.png" src="../../../_images/binary-happy-roi-manager.png" style="width: 177.79999999999998px; height: 238.7px;" /></a>
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">The <em>ROI Manager</em> with two ROIs</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="10426a1e-bdc1-4df6-91c6-42ab86578892" name="520f28ee-e02b-416c-bdca-5a237e536093" type="radio">
</input><label class="tabbed-label" for="10426a1e-bdc1-4df6-91c6-42ab86578892">
Practical</label><div class="tabbed-content docutils">
<p>For <a class="reference internal" href="#fig-rois-mask"><span class="std std-numref">Fig. 14</span></a>, I used the ROI Manager to create a ROI with a hole in it.</p>
<p>To do this in <em>happy_cell.tif</em>, you can</p>
<ol class="simple">
<li><p>Draw one ROI around the full cell, and add it to the ROI Manager</p></li>
<li><p>Draw a second ROI around the nucleus, and add it to the ROI Manager</p></li>
</ol>
<p>Then you can select both ROIs and use <em>one</em> of the combine operations – <span class="guilabel">AND</span>, <span class="guilabel">OR</span>, <span class="guilabel">XOR</span> – to subtract the nucleus ROI from the cell ROI.
The end result is a ROI representing the cytoplasm, with the nucleus removed.</p>
<p>Which combine operation do you need to achieve this?</p>
<p><strong>Tip:</strong> Remember <span class="menuselection">Edit ‣ Selection ‣ Create Mask</span> will let you see which pixels are inside and which pixels are outside the ROI.</p>
<p><a class="reference external" href="https://ij.imjoy.io/?open=https://github.com/bioimage-book/practical-data/blob/main/images/happy_cell.tif"><img alt="launch ImageJ.JS" src="https://ij.imjoy.io/assets/badge/launch-imagej-js-badge.svg" /></a></p>
</div>
<input id="dd6ee942-81fc-4ad4-9548-4691c192faaf" name="520f28ee-e02b-416c-bdca-5a237e536093" type="radio">
</input><label class="tabbed-label" for="dd6ee942-81fc-4ad4-9548-4691c192faaf">
Solution</label><div class="tabbed-content docutils">
<p><span class="guilabel">XOR</span> (‘exclusive OR’) provides a ROI that contains pixels that are inside the cell OR inside the nucleus, but NOT both.</p>
</div>
</div>
</div>
<div class="section" id="overlays">
<span id="sec-imagej-overlay"></span><h3>Overlays<a class="headerlink" href="#overlays" title="Permalink to this headline">¶</a></h3>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p><kbd class="kbd docutils literal notranslate">B</kbd> for <em><strong>B</strong>overlay</em>: shortcut to add a ROI to an overlay</p>
</div>
<p>Overlays also contain a list of ROIs that are shown simultaneously on the image.
However, unlike with the ROI Manager, ROIs stored on an overlay do <em>not</em> usually affect the <span class="guilabel">Measure</span> command.</p>
<p>Overlays are therefore suitable for storing annotations for visualization purposes.
You can think of them as existing on their own separate layer, so that adding and removing the overlay does not mess up the underlying pixel values (<a class="reference internal" href="#fig-rois"><span class="std std-numref">Fig. 17</span></a>).</p>
<p>The main commands for working with overlays are found in the <span class="menuselection">Image ‣ Overlay ‣</span> submenu, where you can get started by drawing a ROI and choosing <span class="guilabel">Add Selection</span> (or simply press <kbd class="kbd docutils literal notranslate">B</kbd>).
The same submenu also provides commands to transfer ROIs between the overlay and the ROI Manager.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can ‘reactivate’ a ROI on an overlay by clicking it with the <kbd class="kbd docutils literal notranslate">Alt</kbd> key pressed (provided a suitable ROI tool is selected), and then edit or reposition it.</p>
<p>Note that if a ROI on an overlay has been ‘reactivated’ in this way, then it <em>does</em> influence measurements.</p>
</div>
</div>
<div class="section" id="saving-rois">
<h3>Saving ROIs<a class="headerlink" href="#saving-rois" title="Permalink to this headline">¶</a></h3>
<p>Individual ROIs, currently active on an image, can be saved simply by choosing <span class="menuselection">File ‣ Save As ‣ Selection…</span></p>
<p>The ROI Manager also has a <span class="guilabel">Save…</span> command (under <span class="guilabel">More</span>), which will save whichever ROIs are currently selected in the manager (or, if none are selected, all of them).</p>
<p>Overlays are fixed to specific images and do not have their own special save command, but will nonetheless be included if you save the image as a TIFF file (ImageJ’s default format).
Any currently-active ROI will also be saved in a TIFF.</p>
<p>This is all fine if you work only in ImageJ or Fiji, but unfortunately if you try to view your ROIs in other software it is highly unlikely to work properly.
The ROI format is specific to ImageJ.</p>
<p>The way around this is to use the <span class="menuselection">Image ‣ Overlay ‣ Flatten</span> command.
This creates an <em>RGB copy of the image in which the pixel values have been changed</em> so that any ROIs or overlays will appear whenever you open the image elsewhere.
Therefore you may well want to use this command when creating figures or presentations, but you do <em>not</em> want to subsequently apply your analysis to the image you have flattened – always use the original instead.</p>
<p>For more details on the impact of converting an image to RGB, see <a class="reference internal" href="../4-colors/colors.html#chap-colors"><span class="std std-ref">Channels &amp; colors</span></a>.</p>
<div class="cell tag_hide-cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">create_figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/rois_and_overlays.png&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">121</span><span class="p">)</span>
<span class="n">show_image</span><span class="p">(</span><span class="s1">&#39;images/rois_flattened.png&#39;</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="mi">122</span><span class="p">)</span>
<span class="n">glue_fig</span><span class="p">(</span><span class="s1">&#39;fig_rois_flatten&#39;</span><span class="p">,</span> <span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-center" id="fig-rois">
<div class="cell_output docutils container">
<img alt="../../../_images/imagej_22_0.png" src="../../../_images/imagej_22_0.png" />
</div>
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">ROIs and overlays are displayed on top of images, and so can be removed easily without having any effect upon the pixel values.
Flattened images may appear the same on screen, but are invariably RGB (see <a class="reference internal" href="../4-colors/colors.html#chap-colors"><span class="std std-ref">Channels &amp; colors</span></a>) and have had their pixel values permanently changed to show any annotations.</span><a class="headerlink" href="#fig-rois" title="Permalink to this image">¶</a></p>
</div>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<img alt="../../../_images/annotated_cyclists.png" src="../../../_images/annotated_cyclists.png" />
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="f2d22d04-154e-45a1-a61d-dd21178768c3" name="e5fe1f81-a6d1-4a36-be92-80c8d9938c11" type="radio">
</input><label class="tabbed-label" for="f2d22d04-154e-45a1-a61d-dd21178768c3">
Practical</label><div class="tabbed-content docutils">
<p>Open the images <em>Annotated_Cyclists_1.tif</em> and <em>Annotated_Cyclists_2.tif</em>, which depict the 3 main cyclist characteristics I found most disconcerting as a pedestrian in Heidelberg.</p>
<p>The images should initially look the same, but in one the text is an overlay, while in the other the image has been flattened.
Which is which? Try to think of several ways to investigate this.</p>
<p><strong>Tip:</strong> Zooming in may help. So might searching the menus for overlay-related commands (aided by <kbd class="kbd docutils literal notranslate">L</kbd>).</p>
</div>
<input id="e23eb0ea-df96-424d-a84e-5fc37357f17f" name="e5fe1f81-a6d1-4a36-be92-80c8d9938c11" type="radio">
</input><label class="tabbed-label" for="e23eb0ea-df96-424d-a84e-5fc37357f17f">
Solution</label><div class="tabbed-content docutils">
<p><em>Annotated_Cyclists_1.tif</em> is the one with the overlay.</p>
<p>Five ways to determine whether an annotation is an overlay or not:</p>
<ol class="simple">
<li><p>Zoom in very closely to the region containing the annotation. If it becomes ‘blocky’, i.e.
made up of pixels, it is not an overlay.
If it remains smooth, then it is an overlay.</p></li>
<li><p>Move your cursor over the region where the annotation appears, and look at the pixel values.
If the values are all the same where the annotation is present, but different elsewhere, then it is unlikely to be an overlay: the annotation is influencing the pixel values.</p></li>
<li><p>Using the paintbrush <img alt="../../../_images/brush.png" src="../../../_images/brush.png" /> tool from the toolbar, try putting some other color where the annotation appears.
If the annotation remains visible on top of where you drew, it must be on an overlay.</p></li>
<li><p>Choose <span class="menuselection">Image ‣ Overlay ‣ Hide Overlay</span> and see if the annotation disappears.</p></li>
<li><p>Choose <span class="menuselection">Image ‣ Overlay ‣ To ROI Manager</span> and see if anything happens at all.</p></li>
</ol>
</div>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="09093ad3-32dc-4f82-b5c8-050b00810c84" name="24e1a78b-42a0-4984-bd35-53531b59ca7e" type="radio">
</input><label class="tabbed-label" for="09093ad3-32dc-4f82-b5c8-050b00810c84">
Practical</label><div class="tabbed-content docutils">
<p>Using the cyclist image containing the overlay from the previous practical, rearrange the annotations so that they are each positioned next to different cyclists.</p>
<p>You could do this by deleting the overlay and starting again, but there are other, faster possibilities (using a technique mentioned before, or the <span class="menuselection">Image ‣ Overlay ‣ To ROI Manager</span> command).</p>
</div>
<input id="83a4f646-4c16-4dc6-baf0-5a951ba4803e" name="24e1a78b-42a0-4984-bd35-53531b59ca7e" type="radio">
</input><label class="tabbed-label" for="83a4f646-4c16-4dc6-baf0-5a951ba4803e">
Solution</label><div class="tabbed-content docutils">
<p>Click the annotation while holding down the <kbd class="kbd docutils literal notranslate">Alt</kbd> key, to bring it to life so it can be moved around again.
This only works if certain tools are selected, e.g. <span class="guilabel">Rectangle</span> or <span class="guilabel">Text</span>, because some other tools have more overriding functions, such as zooming in or scrolling.</p>
</div>
</div>
</div>
</div>
<div class="section" id="generating-histograms">
<h2>Generating histograms<a class="headerlink" href="#generating-histograms" title="Permalink to this headline">¶</a></h2>
<p>Creating a histogram in ImageJ, via <span class="menuselection">Analyze ‣ Histogram</span> or simply pressing <kbd class="kbd docutils literal notranslate">H</kbd>, results in a new histogram window being created.
Like with <span class="menuselection">Analyze ‣ Measure</span>, this will use a ROI if it is available; otherwise it will use the full image.</p>
<p>An ImageJ histogram is displayed above some basic summary statistics and four intriguing buttons:</p>
<ul class="simple">
<li><p><span class="guilabel">List</span> – to list the actual bins and counts associated with the histogram</p></li>
<li><p><span class="guilabel">Copy</span> – to copy the list above to the clipboard</p></li>
<li><p><span class="guilabel">Log</span> – to change the y axis to show the log of the counts for each bin; this is helpful to distinguish between counts that are very small</p></li>
<li><p><span class="guilabel">Live</span> – to make the histogram responsive to whatever you do with the image – including changing the LUT, or any ROI</p></li>
</ul>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../../../_images/measure-imagej-histogram.png"><img alt="../../../_images/measure-imagej-histogram.png" src="../../../_images/measure-imagej-histogram.png" style="width: 651.6999999999999px; height: 296.09999999999997px;" /></a>
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">An image with its histogram in ImageJ.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition-a-histogram-of-an-image-and-an-image-of-a-histogram admonition">
<p class="admonition-title">A histogram of an image… and an image of a histogram</p>
<p>A slightly odd feature of ImageJ histograms is that <em>the histogram is also an image</em>.
That means you can draw ROIs and even make measurements on it.
We will revisit this in <a class="reference internal" href="../5-pixel_size/pixel_size.html#chap-pixel-size"><span class="std std-ref">Pixel size &amp; dimensions</span></a>.</p>
</div>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="fn-1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>If you have a stack, you also may need to explore <span class="guilabel">More &gt;&gt; Options…</span> to define whether all ROIs are shown on all slices, or only on the slices on which they were first created.</p>
</dd>
</dl>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "petebankhead/jupyter-book",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/1-concepts/2-measurements"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="measurements.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Measurements &amp; histograms</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="python.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Python: Measurements &amp; histograms</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Pete Bankhead<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>